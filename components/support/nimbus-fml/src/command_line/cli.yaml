name: nimbus-fml
author: nimbus-dev@mozilla.com
about: Tool for working with Nimbus Feature Manifests
args:
subcommands:
    - generate:
        about: Generate feature structs against the Feature Variables API.
        args:
            - INPUT:
                help: Sets the input file to use
                required: true
                index: 1
            - OUTPUT:
                help: The file or directory where generated code is created
                required: true
                index: 2
            - language:
                help: The language of the output file
                long: language
                takes_value: true
                possible_values:
                  - swift
                  - kotlin
            - channel:
                help: The channel to generate the defaults for
                long: channel
                global: false
                takes_value: true
            - cache-dir:
                help: The directory where downloaded files are cached
                long: cache-dir
                takes_value: true
            - repo-file:
                help: The file containing the version/refs/locations for other repos
                long: repo-file
                takes_value: true
                multiple: true
    - generate-experimenter:
        about: Generate a version of this manifest compatible with Experimenter's format.
        args:
            - INPUT:
                help: Sets the input file to use
                required: true
                index: 1
            - OUTPUT:
                help: The file or directory where generated code is created
                required: true
                index: 2
            - channel:
                help: The channel to generate the defaults for
                long: channel
                takes_value: true
            - cache-dir:
                help: The directory where downloaded files are cached
                long: cache-dir
                takes_value: true
            - repo-file:
                help: The file containing the version/refs/locations for other repos
                long: repo-file
                takes_value: true
                multiple: true
    - fetch:
        about: Get the input file, with the same rules that govern how FilePaths work.
        args:
            - INPUT:
                help: Sets the input file to use
                required: true
                index: 1
            - cache-dir:
                help: The directory where downloaded files are cached
                long: cache-dir
                takes_value: true
            - repo-file:
                help: The file containing the version/refs/locations for other repos
                long: repo-file
                takes_value: true
                multiple: true
    - single-file:
        about: Create a single file out of the given manifest,
            suited for production environments where only one file is
            allowed, and only one channel is needed.
        args:
            - INPUT:
                help: Sets the input file to use
                required: true
                index: 1
            - OUTPUT:
                help: The file or directory where generated code is created
                required: true
                index: 2
            - channel:
                help: The channel to generate the defaults for
                long: channel
                takes_value: true
            - cache-dir:
                help: The directory where downloaded files are cached
                long: cache-dir
                takes_value: true
            - repo-file:
                help: The file containing the version/refs/locations for other repos
                long: repo-file
                takes_value: true
                multiple: true
    - validate:
          about: Validate an FML configuration and all of its channels.
          args:
              - INPUT:
                    help: Sets the input file to use
                    required: true
                    index: 1
              - cache-dir:
                    help: The directory where downloaded files are cached
                    long: cache-dir
                    takes_value: true
              - repo-file:
                    help: The file containing the version/refs/locations for other repos
                    long: repo-file
                    takes_value: true
                    multiple: true
