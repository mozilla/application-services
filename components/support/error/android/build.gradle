plugins {
    alias libs.plugins.python.envs.plugin
    alias libs.plugins.kotlinx.serialization
}

apply plugin: 'kotlinx-serialization'

apply from: "$appServicesRootDir/build-scripts/component-common.gradle"
apply from: "$appServicesRootDir/publish.gradle"

// Needs to happen before `dependencies` in order for the variables
// exposed by the plugin to be available for this project.
ext {
    gleanNamespace = "mozilla.telemetry.glean"
    gleanYamlFiles = ["${project.projectDir}/../metrics.yaml", "${project.projectDir}/../pings.yaml"]
    if (gradle.hasProperty("mozconfig")) {
        gleanPythonEnvDir = gradle.mozconfig.substs.GRADLE_GLEAN_PARSER_VENV
    }
}
apply plugin: "org.mozilla.telemetry.glean-gradle-plugin"

dependencies {
    implementation libs.mozilla.glean
    implementation libs.kotlinx.serialization
    implementation project(':tracing')
}

android {
    namespace 'org.mozilla.appservices.errorsupport'
}

ext.configureUniFFIBindgen("error_support")
ext.dependsOnTheMegazord()
ext.configurePublish()
